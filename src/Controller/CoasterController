<?php

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Attribute\Route;
use Doctrine\ORM\EntityManagerInterface;
use App\Entity\Coaster; 
use App\Form\CoasterType;
use Symfony\Component\HttpFoundation\Request;

class CoasterController extends AbstractController
{
    /**
     * Une route de base pour l'index du CoasterController
     */
    #[Route(path :'/coaster/new', name: 'app_coaster_new')]
    
    public function add(EntityManagerInterface $em, Request $request): Response
{
    $coaster = new Coaster();
    /*$coaster->setName('Space');
    $coaster->setLength(600);
    $coaster->setMaxSpeed(75);
    $coaster->setMaxHeight(68);
    $coaster->setOperating(true);

    $em->persist($coaster);

    $em->flush();*/

    $form = $this->createForm(CoasterType::class, $coaster);
    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        $em->persist($coaster);
        $em->flush();
    }
    /*return new Response('Coaster ajoutÃ©!');*/

    return $this->render('/coaster/add.html.twig', [
        'CoasterForm' => $form
    ]);
}

}

